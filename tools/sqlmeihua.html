---
layout: null
title: "SQLç¾åŒ–"
description: "SQLè¯­å¥æ’ç‰ˆç¾åŒ–ï¼ˆå¸¦é«˜äº®ï¼‰"
---
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>SQL ç¾åŒ–</title>
    <style>
        :root {
            --bg-color: #f5f7f9;
            --panel-bg: #ffffff;
            --editor-bg: #1e1e1e;
            --text-main: #333;
            --key-color: #569cd6;
            --str-color: #ce9178;
            --num-color: #b5cea8;
            --func-color: #dcdcaa;
            --comm-color: #6a9955;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
            margin: 0;
            background-color: var(--bg-color);
            color: var(--text-main);
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        header {
            padding: 15px 25px;
            background: #fff;
            border-bottom: 1px solid #ddd;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .container {
            display: flex;
            flex: 1;
            padding: 20px;
            gap: 20px;
            overflow: hidden;
        }

        .panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--panel-bg);
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .panel-header {
            padding: 10px 15px;
            background: #eee;
            font-size: 12px;
            font-weight: bold;
            color: #666;
            text-transform: uppercase;
        }

        textarea, .highlight-area {
            flex: 1;
            width: 100%;
            border: none;
            padding: 15px;
            font-family: "Consolas", "Monaco", monospace;
            font-size: 14px;
            line-height: 1.5;
            box-sizing: border-box;
            outline: none;
            overflow: auto;
            white-space: pre;
        }

        textarea {
            background: #252526;
            color: #d4d4d4;
            resize: none;
        }

        .highlight-area {
            background: var(--editor-bg);
            color: #d4d4d4;
        }

        /* è¯­æ³•é«˜äº®æ ·å¼ */
        .hl-key { color: var(--key-color); font-weight: bold; }
        .hl-str { color: var(--str-color); }
        .hl-num { color: var(--num-color); }
        .hl-func { color: var(--func-color); }
        .hl-comm { color: var(--comm-color); }

        .btn {
            background: #007acc;
            color: white;
            border: none;
            padding: 8px 18px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .btn:hover { background: #005fa3; }
    </style>
</head>
<body>

<header>
    <div style="font-size: 18px; font-weight: bold;">ğŸ§© SQL ç¾åŒ–</div>
    <button class="btn" onclick="processSql()">ç«‹å³ç¾åŒ–</button>
</header>

<div class="container">
    <div class="panel">
        <div class="panel-header">è¾“å…¥åŸå§‹ SQL</div>
        <textarea id="inputSql" placeholder="åœ¨æ­¤è¾“å…¥ SQLï¼Œä¾‹å¦‚ï¼šselect * from users where id=1"></textarea>
    </div>
    <div class="panel">
        <div class="panel-header">é«˜äº®ç»“æœ</div>
        <div id="outputSql" class="highlight-area"></div>
    </div>
</div>

<script>
    /**
     * æ ¸å¿ƒé€»è¾‘ï¼šSQL æ ¼å¼åŒ–ç®—æ³•
     */
    function formatSQL(sql) {
        // 1. åŸºæœ¬æ¸…ç†
        sql = sql.replace(/\s+/g, ' ').trim();
        
        // 2. å®šä¹‰å…³é”®å­—æ¢è¡Œè§„å¾‹
        const keywords = ['SELECT', 'FROM', 'WHERE', 'AND', 'OR', 'GROUP BY', 'ORDER BY', 'HAVING', 'LIMIT', 'JOIN', 'LEFT JOIN', 'RIGHT JOIN', 'ON', 'INSERT INTO', 'VALUES', 'UPDATE', 'SET'];
        
        let indent = 0;
        let result = "";
        
        // å°†å…³é”®å­—è½¬ä¸ºå¤§å†™å¹¶å‰ååŠ å ä½ç¬¦
        let words = sql.split(' ');
        
        words.forEach((word) => {
            let upWord = word.toUpperCase();
            if (keywords.includes(upWord)) {
                result += "\n" + upWord + " ";
            } else if (word.includes(',')) {
                result += word.replace(',', ',\n    ');
            } else {
                result += word + " ";
            }
        });

        return result.trim();
    }

    /**
     * æ ¸å¿ƒé€»è¾‘ï¼šæ­£åˆ™è¯­æ³•é«˜äº®
     */
    function highlightSQL(sql) {
        if (!sql) return "";

        // è½¬ä¹‰ HTML å­—ç¬¦é˜²æ­¢æ³¨å…¥
        let html = sql.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");

        // æ­£åˆ™è§„åˆ™
        const rules = [
            { reg: /\b(SELECT|FROM|WHERE|AND|OR|GROUP BY|ORDER BY|LIMIT|JOIN|LEFT|RIGHT|INNER|ON|AS|INSERT|INTO|VALUES|UPDATE|SET|DELETE|CREATE|TABLE|DATABASE|DROP|ALTER|PRIMARY KEY|DISTINCT|UNION|ALL)\b/gi, cls: 'hl-key' },
            { reg: /\b(COUNT|SUM|AVG|MIN|MAX|NOW|DATE_FORMAT|CONCAT|IFNULL|COALESCE)\b/gi, cls: 'hl-func' },
            { reg: /('.*?'|".*?")/g, cls: 'hl-str' },
            { reg: /\b(\d+)\b/g, cls: 'hl-num' },
            { reg: /(--.*$|\/\*[\s\S]*?\*\/)/gm, cls: 'hl-comm' }
        ];

        // å ä½æ›¿æ¢é¿å…å†²çª
        let parts = [];
        rules.forEach((rule, idx) => {
            html = html.replace(rule.reg, (match) => {
                const placeholder = `__PH_${idx}_${parts.length}__`;
                parts.push(`<span class="${rule.cls}">${match.toUpperCase()}</span>`);
                return placeholder;
            });
        });

        // è¿˜åŸå ä½ç¬¦
        rules.forEach((rule, idx) => {
            parts.forEach((content, pIdx) => {
                const placeholder = `__PH_${idx}_${pIdx}__`;
                html = html.replace(placeholder, content);
            });
        });

        return html;
    }

    function processSql() {
        const input = document.getElementById('inputSql').value;
        if (!input) {
            document.getElementById('outputSql').innerHTML = "";
            return;
        }
        
        // 1. æ ¼å¼åŒ–
        const formatted = formatSQL(input);
        // 2. é«˜äº®æ¸²æŸ“
        const highlighted = highlightSQL(formatted);
        
        document.getElementById('outputSql').innerHTML = highlighted;
    }

    // ç›‘å¬é”®ç›˜äº‹ä»¶ï¼Œå®ç°ç®€æ˜“å®æ—¶é¢„è§ˆ
    document.getElementById('inputSql').addEventListener('input', function() {
        processSql();
    });

    // é»˜è®¤åˆå§‹åŒ–
    document.getElementById('inputSql').value = "select id, name, score from students where score > 90 and class_id = 1 order by score desc";
    processSql();
</script>

</body>
</html>